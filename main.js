(()=>{"use strict";var e={};function t(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const n=document.createElement(e);return n.className=t,s&&(n.textContent=s),n}e.p="";const s={file:e.p+"eff63cd0b24a17995be9.svg",image:e.p+"058bf93ee4b5bff15d9c.svg",audio:e.p+"748407104126c3f298b1.svg",video:e.p+"f1543428b63b8f708177.svg"};class n{constructor(e,t){this.server=t,this.id=e.id,this.usertype=e.usertype,this.username=e.username,this.date=new Date(e.date),this.content=e.content,this.favorite=e.favorite,this.pinned=e.pinned}render(){return this.messageEl=t("li","messanger__message message-messanger"),this.messageEl.classList.add("bot"===this.usertype?"bot-message":"user-message"),this.messageEl.dataset.id=this.id,this.messageInfoEl=t("div","message-messanger__info"),this.messageAuthorEl=t("span","message-messanger__author","bot"!==this.usertype?"You":this.username),this.messageDateEl=t("span","message-messanger__date",this.formatDate(this.date)),this.messageInfoEl.appendChild(this.messageAuthorEl),this.messageInfoEl.appendChild(this.messageDateEl),this.messageContentEl=t("div","message-messanger__content content"),this.contentMediaEl=t("div","content__media"),this.mediaImagesEl=t("div","content__images"),this.checkType(this.messageContentEl,this.contentMediaEl,this.mediaImagesEl),this.messageEl.appendChild(this.messageInfoEl),this.messageEl.appendChild(this.messageContentEl),this.messageContentEl.appendChild(this.contentMediaEl),this.contentMediaEl.appendChild(this.mediaImagesEl),this.messagesControllers=t("div","message-messanger__controllers message-controllers"),this.pinBtn=t("button","message-controllers__pin messanger-btn"),this.favoriteBtn=t("button","message-controllers__favorite messanger-btn"),this.favorite&&this.favoriteBtn.classList.add("added"),this.messagesControllers.appendChild(this.pinBtn),this.messagesControllers.appendChild(this.favoriteBtn),this.pinBtn.addEventListener("click",(()=>this.pin())),this.favoriteBtn.addEventListener("click",(()=>this.addToFavorite())),this.messageEl.appendChild(this.messagesControllers),this.messageEl}checkType(e,n,i){this.content.forEach((o=>{switch(o.type){case"text":const a=t("span","content__text");a.innerHTML=o.body.replace(/([^\"=]{2}|^)((https?|ftp):\/\/\S+[^\s.,> )\];'\"!?])/,'$1<a href="$2" target="_blank">$2</a>'),e.appendChild(a);break;case"video":const d=t("div","content__video"),r=t("video");r.src=o.body,r.controls=!0,d.appendChild(r);const l=t("a","content__download-btn messanger-btn");l.href=o.body,l.download=o.filename,d.appendChild(l),n.appendChild(d);break;case"audio":const c=t("div","content__audio"),p=t("span","content__audio-name",o.filename);c.appendChild(p);const h=t("audio");h.src=o.body,h.controls="true",c.appendChild(h);const m=t("a","content__download-btn messanger-btn");m.href=o.body,m.download=o.filename,c.appendChild(m),n.appendChild(c);break;case"location":const u=t("span","content__location");u.innerHTML=`üìç Your current location - <a href="https://www.google.com/maps/search/?api=1&query=${o.body}" target="_blank">${o.body}</a>`,e.appendChild(u);break;case"image":const g=t("div","content__image"),v=t("img");g.appendChild(v),v.src=o.body;const f=t("a","content__download-btn messanger-btn");f.href=o.body,f.download=o.filename,g.appendChild(f),i.appendChild(g);break;default:const y=t("div","content__file"),b=t("img");b.src=s.file,y.appendChild(b);const E=t("span","content__file-name",o.filename);y.appendChild(E);const _=t("a","content__download-btn messanger-btn");return _.href=o.body,_.download=o.filename,y.appendChild(_),void e.appendChild(y)}}))}addToFavorite(){this.favorite?(this.favorite=!1,this.favoriteBtn.classList.remove("added")):(this.favorite=!0,this.favoriteBtn.classList.add("added")),this.server.send(JSON.stringify({addToFavorite:!0,favorite:this.favorite,id:this.messageEl.dataset.id}))}pin(){this.pinned=!0,this.server.send(JSON.stringify({pinMessage:!0,pinned:this.pinned,id:this.messageEl.dataset.id}))}formatDate(e){return`${e.getHours()<10?`0${e.getHours()}`:e.getHours()}:${e.getMinutes()<10?`0${e.getMinutes()}`:e.getMinutes()}`}}function i(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return JSON.stringify({usertype:e,botname:s,content:t,pinned:!1,favorite:!1})}class o{constructor(e,t,s){this.botname=e,this.description=`–ü—Ä–∏–≤–µ—Ç! –ú–µ–Ω—è –∑–æ–≤—É—Ç ${e}. –ï—Å–ª–∏ —Ç—ã –∑–∞—Å–∫—É—á–∞–ª, —è –ø–æ–º–æ–≥—É —Ç–µ–±–µ –≤—ã–±—Ä–∞—Ç—å –∫–∞–∫–æ–π-–Ω–∏–±—É–¥—å –∑–∞—Ä—É–±–µ–∂–Ω—ã–π —Å–µ—Ä–∏–∞–ª –∏–ª–∏ —Ñ–∏–ª—å–º –∏ –¥–∞–∂–µ –∏–≥—Ä—É –Ω–∞ –ü–ö. –ß—Ç–æ–±—ã –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫–æ –º–Ω–µ, –Ω–∞—á–Ω–∏ —Å–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å–æ —Å–ª—ç—à–∞ ("/") –∏ –Ω–∞–ø–∏—à–∏ –æ–¥–Ω—É –∏–∑ –∫–æ–º–∞–Ω–¥: "hello", "bye", "serial", "film", "game". –ù–∞–ø—Ä–∏–º–µ—Ä: "/serial".`,this.greeting=null==t?void 0:t.greeting,this.goodbye=null==t?void 0:t.goodbye,this.serials=null==t?void 0:t.serials,this.games=null==t?void 0:t.games,this.server=s,this.greet()}reply(e){if(!/^\//.test(e))return;let t;switch(e){case"/hello":t=i("bot",[{type:"text",body:this.random(this.greeting)}],this.botname),this.server.send(t);break;case"/bye":t=i("bot",[{type:"text",body:this.random(this.goodbye)}],this.botname),this.server.send(t);break;case"/serial":t=i("bot",[{type:"text",body:this.random(this.serials)}],this.botname),this.server.send(t);break;case"/film":fetch("https://kinopoiskapiunofficial.tech/api/v2.2/films",{method:"GET",headers:{"X-API-KEY":"2abdabef-3994-4107-8e8d-39dd2e2edcda","Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const s=this.random(e.items);t=i("bot",[{type:"text",body:s.nameOriginal},{type:"image",body:s.posterUrlPreview}],this.botname),this.server.send(t)})).catch((e=>{throw new Error(e)}));break;case"/game":t=i("bot",[{type:"text",body:this.random(this.games)}],this.botname),this.server.send(t);break;default:t=i("bot",[{type:"text",body:"–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –¥–∞–Ω–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ –ø–æ–∫–∞ —á—Ç–æ –Ω–µ –¥–æ—Å—Ç—É–ø–Ω–∞ –º–Ω–µ. –ü–æ–ø—Ä–æ–±—É–π –µ—â–µ —Ä–∞–∑ –Ω–∞–ø–∏—Å–∞—Ç—å —Ç–æ—á–Ω–µ–µ :)"}],this.botname),this.server.send(t)}}greet(){const e={greet:!0,usertype:"bot",botname:this.botname,content:[{type:"text",body:this.description}]};this.server.send(JSON.stringify(e))}random(e){return e[Math.floor(Math.random()*e.length)]}}function a(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"change";const n="drop"===s?e.dataTransfer:e.target;if(!n.files.length)return;const i=Array.from(n.files);i.forEach((e=>{const s=new FileReader;s.onload=s=>{const n=s.target.result;document.querySelector(".add-file-popup")||document.body.appendChild(t.render()),t.addFile(e,n)},s.readAsDataURL(e)}))}function d(e,t){e.addEventListener("dragover",(e=>{e.preventDefault(),e.currentTarget.querySelector(".droparea").classList.remove(null)})),e.addEventListener("dragleave",(e=>{e.currentTarget.querySelector(".droparea").classList.add(null)})),e.addEventListener("drop",(e=>{e.preventDefault();const s=e.currentTarget.querySelector(".droparea");s&&(a(e,t,"drop"),s.classList.add(null))}))}const r=document.getElementById("message-form"),l=document.getElementById("type-message"),c=document.querySelector(".messanger__chat-container"),p=document.getElementById("chat"),h=document.getElementById("add-file-input"),m=document.getElementById("add-file-btn"),u=new class{render(){return this.loaderEl=t("div","loader"),this.loaderEl.innerHTML='\n  <svg version="1.1" id="loader-1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n     width="40px" height="40px" viewBox="0 0 50 50" style="enable-background:new 0 0 50 50;" xml:space="preserve">\n  <path fill="#000" d="M43.935,25.145c0-10.318-8.364-18.683-18.683-18.683c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615c8.072,0,14.615,6.543,14.615,14.615H43.935z">\n    <animateTransform attributeType="xml"\n      attributeName="transform"\n      type="rotate"\n      from="0 25 25"\n      to="360 25 25"\n      dur="0.6s"\n      repeatCount="indefinite"/>\n    </path>\n  </svg>',this.loaderEl}},g=document.querySelector(".messanger__composer-btns"),v=document.querySelector(".messanger__record-media"),f=document.getElementById("rec-audio-btn"),y=document.getElementById("rec-video-btn"),b=document.getElementById("clear-media-btn"),E=document.getElementById("send-media-btn"),_=document.getElementById("media-timer"),w=document.getElementById("search-form"),C=document.getElementById("search-message"),L=document.querySelector(".messanger__no-search"),k=document.getElementById("show-favorite-btn"),B=document.getElementById("send-geo-btn");class I{constructor(e){this.server=e,this.content=[]}render(){return this.popup=t("div","add-file-popup"),this.popupOverlay=t("div","add-file-popup__overlay"),this.popup.appendChild(this.popupOverlay),this.popupBody=t("div","add-file-popup__body"),this.popupOverlay.appendChild(this.popupBody),d(this.popupBody,this),this.popupFiles=t("div","add-file-popup__files"),this.popupBody.appendChild(this.popupFiles),this.popupControllers=t("div","add-file-popup__controllers"),this.popupBody.appendChild(this.popupControllers),this.controllersLeft=t("div","controllers__left"),this.popupControllers.appendChild(this.controllersLeft),this.addFileBtn=t("button","controllers__add-btn popup-btn","add"),this.controllersLeft.appendChild(this.addFileBtn),this.addFileInput=t("input","controllers__add-input null"),this.addFileInput.type="file",this.addFileInput.setAttribute("multiple",!0),this.controllersLeft.appendChild(this.addFileInput),this.addFileBtn.addEventListener("click",(()=>this.addFileInput.click())),this.addFileInput.addEventListener("change",(e=>{a(e,this),e.currentTarget.value=""})),this.controllersRight=t("div","controllers__right"),this.popupControllers.appendChild(this.controllersRight),this.cancelBtn=t("button","controllers__cancel-btn popup-btn","cancel"),this.controllersRight.appendChild(this.cancelBtn),this.cancelBtn.addEventListener("click",(()=>this.removeEl(this.popup))),this.sendBtn=t("button","controllers__send-btn popup-btn","send"),this.controllersRight.appendChild(this.sendBtn),this.sendBtn.addEventListener("click",(()=>{const e=i("person",this.content);this.server.send(e),p.appendChild(u.render()),this.content=[],this.removeEl(this.popup)})),this.dragArea=t("div","add-file-popup__droparea droparea null"),this.dragArea.innerHTML="<b>Drop files here</b> <br>to send them",this.popupBody.appendChild(this.dragArea),this.popup}addFile(e,s){if(!this.popupFiles)return;console.log(e);const n=t("div","add-file-popup__file file"),i=t("div","file__left");n.appendChild(i);const o=t("img","file__icon");o.src=this.checkFileType(e),i.appendChild(o);const a=t("div","file__info");i.appendChild(a);const d=t("div","file__title",e.name),r=t("div","file__size",function(e){if(!e)return"0 Byte";const t=parseInt(Math.floor(Math.log(e)/Math.log(1024)));return Math.round(e/Math.pow(1024,t))+" "+["Bytes","KB","MB","GB","TB"][t]}(e.size));a.appendChild(d),a.appendChild(r);const l=t("button","file__delete-btn messanger-btn");n.appendChild(l),l.addEventListener("click",(async()=>{await this.removeEl(n),this.popupFiles.children.length||this.cancelBtn.click()})),this.popupFiles.appendChild(n),this.content.push({type:e.type.split("/")[0],body:s,filename:e.name})}async removeEl(e){return new Promise(((t,s)=>{e.classList.toggle("removing"),setTimeout((()=>{e.remove(),t(!0)}),400)}))}checkFileType(e){return e.type.match("image")?s.image:e.type.match("audio")?s.audio:e.type.match("video")?s.video:s.file}}const x={greeting:["–¢–æ–ª—å–∫–æ —Ç–µ–±—è –≤—Å–ø–æ–º–Ω–∏–ª, —ç—Ç–æ –∫ –±–æ–≥–∞—Ç—Å—Ç–≤—É!","–ü—Ä–∏–≤–µ—Ç! –ö–∞–∫ –∂–µ —è —Ç–µ–±—è –∂–¥–∞–ª!","–ë—É—ç–Ω–æ—Å –¥–∏–∞—Å!","–ò —Ç–µ–±–µ –Ω–µ —Ö–≤–æ—Ä–∞—Ç—å :)","–ö–∞–∫–∏–µ –ª—é–¥–∏ –∏ –±–µ–∑ –æ—Ö—Ä–∞–Ω—ã :)","–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ-–∫–∞, –∫—Ç–æ –∑–¥–µ—Å—å?!","–ß—Ç–æ –Ω–æ–≤–µ–Ω—å–∫–æ–≥–æ?","–°–∫–æ–ª—å–∫–æ –ª–µ—Ç, —Å–∫–æ–ª—å–∫–æ –∑–∏–º!","–ù–µ—Ç –Ω–∏—á–µ–≥–æ –ª—É—á—à–µ, —á–µ–º –≤—Å—Ç—Ä–µ—Ç–∏—Ç—å —Å—Ç–∞—Ä–æ–≥–æ –¥—Ä—É–≥–∞ :)","Aloha!"],goodbye:["–î–∞ –ø—Ä–∏–±—É–¥–µ—Ç —Å —Ç–æ–±–æ–π —Å–∏–ª–∞!","Hasta la vista, baby!","–ü—Ä–æ—â–∞–π!","–í–æ–∑–≤—Ä–∞—â–∞–π—Å—è, —è –±—É–¥—É —Ä–∞–¥ :)","–ï—Å–ª–∏ —á—Ç–æ, —è —Ä—è–¥–æ–º :)","–î–æ —Å–≤—è–∑–∏!","–Ø –¥—É–º–∞—é —ç—Ç–æ –Ω–∞—á–∞–ª–æ –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ–π –¥—Ä—É–∂–±—ã :)","–Ø –±—ã –ø–æ–≥–æ–≤–æ—Ä–∏–ª –¥–æ–ª—å—à–µ, –Ω–æ –∫–æ –º–Ω–µ –ø–æ–∂–∞–ª–æ–≤–∞–ª —Å—Ç–∞—Ä—ã–π –¥—Ä—É–≥. –ü—Ä–æ—â–∞–π!","–î–æ —Å–≤—è–∑–∏!","–¢–æ–ª—å–∫–æ –Ω–µ —Å–∂–∏–≥–∞–π –º–æ—Å—Ç—ã –∏ –≤–æ–∑–≤—Ä–∞—â–∞–π—Å—è —Å–∫–æ—Ä–µ–µ!"],serials:["–ò–≥—Ä–∞ –ø—Ä–µ—Å—Ç–æ–ª–æ–≤","–ü–æ–ª–æ–≤–æ–µ –≤–æ—Å–ø–∏—Ç–∞–Ω–∏–µ","–õ–æ–∫–∏","–û—Å—Ç—Ä—ã–µ –∫–æ–∑—ã—Ä—å–∫–∏","–í–∏–¥–µ—Ç—å","–í–æ –≤—Å–µ —Ç—è–∂–∫–∏–µ","–û—á–µ–Ω—å —Å—Ç—Ä–∞–Ω–Ω—ã–µ –¥–µ–ª–∞","–ì–æ–ª—è–∫","–û—Ç–±—Ä–æ—Å—ã","–•–æ–¥ –∫–æ—Ä–æ–ª–µ–≤—ã","–ü–∞—Ü–∞–Ω—ã","13 –ø—Ä–∏—á–∏–Ω –ø–æ—á–µ–º—É","–≠–ª–∏—Ç–∞","–ë—É–º–∞–∂–Ω—ã–π –¥–æ–º","–ò–≥—Ä–∞ –≤ –∫–∞–ª—å–º–∞—Ä–∞","–ö–ª–∏–Ω–∏–∫–∞","–î–æ–∫—Ç–æ—Ä —Ö–∞—Éc","–¢–µ–æ—Ä–∏—è –±–æ–ª—å—à–æ–≥–æ –≤–∑—Ä—ã–≤–∞","–¢–µ–¥ –õ–∞—Å—Å–æ","–ó–∞—â–∏—â–∞—è –î–∂–µ–π–∫–æ–±–∞","–î–æ–º —Å –ø—Ä–∏—Å–ª—É–≥–æ–π","–õ—É–Ω–Ω—ã–π —Ä—ã—Ü–∞—Ä—å","–û—Å—Ç–∞—Ç—å—Å—è –≤ –∂–∏–≤—ã—Ö","–í–µ–¥—å–º–∞–∫","–ú–∞–≥–∏—á–µ—Å–∫–∞—è –±–∏—Ç–≤–∞","–ö–ª–∏–Ω–æ–∫, —Ä–∞—Å—Å–µ–∫–∞—é—â–∏–π –¥–µ–º–æ–Ω–æ–≤","–¢–µ—Ç—Ä–∞–¥—å —Å–º–µ—Ä—Ç–∏"],games:["Dota 2","The Witcher 3","2k22","Grand Theft Auto V","God of War","Elden Ring","The Elder Scrolls V: Skyrim","Aion","Stray","Red Dead Redemption 2","Bioshock Infinite","Far Cry 3","Need for Speed: Most Wanted","Black Desert","Fortnite","Path of Exile","League of Legends","World of Warcraft","APEX Legends","Left 4 Dead","Blade & Soul","Forza Horizon 4","Destiny 2","Warframe","Death Stranding"]};function S(e,t){e.style.height=t,e.style.height=e.scrollHeight+"px"}function T(e,t,s,n,i){e.send(t);const o=JSON.parse(t).content.find((e=>"text"===e.type));s.reply(o.body),n.reset(),S(i,"50px")}class M{constructor(e){this.server=e}init(){f.addEventListener("click",(()=>{g.classList.add("null"),v.classList.remove("null"),v.classList.add("show"),this.audioRecorder()})),y.addEventListener("click",(()=>{g.classList.add("null"),v.classList.remove("null"),v.classList.add("show"),this.audioRecorder(!0)}))}async audioRecorder(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!navigator.mediaDevices)throw new Error("Audio and video recording are not supported by the browser.");try{let s=!0,n=0,o=null;if(!window.MediaRecorder)throw new Error("The browser needs permission to record media.");f.disable=!1,y.disable=!1;const a=await navigator.mediaDevices.getUserMedia({audio:!0,video:e});if(e){const e=t("video","video-preview");e.controls=!0,e.muted="muted",e.srcObject=a,document.body.appendChild(e),e.play()}const d=new MediaRecorder(a),r=[];d.start(),d.addEventListener("start",(()=>{o=setInterval((()=>{_.textContent=this.setTimer(n++)}),1e3)})),d.addEventListener("dataavailable",(e=>{r.push(e.data)})),d.addEventListener("stop",(async()=>{if(clearInterval(o),_.textContent="00:00",s){let t="audio";e&&(t="video");const s=new Blob(r,{type:`${t}/mp4`}),n=new FileReader;n.readAsDataURL(s),n.onload=()=>{const e=n.result,s=i("person",[{type:t,body:e,filename:"Voice message"}]);this.server.send(s)}}e&&document.querySelector(".video-preview").remove(),v.classList.add("null"),g.classList.remove("null"),g.classList.add("show")})),E.addEventListener("click",(()=>{d.stop(),a.getTracks().forEach((e=>e.stop())),s=!0})),b.addEventListener("click",(()=>{d.stop(),a.getTracks().forEach((e=>e.stop())),s=!1}))}catch(e){throw new Error("The browser needs permission to record media.")}}setTimer(e){const t=Math.floor(e/60),s=e-60*t;return`${t<10?`0${t}`:t}:${s<10?`0${s}`:s}`}}window.onload=()=>{[...document.forms].forEach((e=>e.reset()));const e=new WebSocket("wss://young-plains-19005.herokuapp.com/ws");console.log(e);let s=!1;e.onopen=()=>{const g=new o("Jarvis the Bot",x,e);e.send(JSON.stringify({init:!0})),new M(e).init();const v=new I(e);let f=!1;e.onmessage=i=>{u.loaderEl&&u.loaderEl.remove();const o=JSON.parse(i.data);if(console.log(o),o.search||o.init)o.messages.length?(L.classList.add("null"),L.classList.remove("show")):(L.classList.remove("null"),L.classList.add("show")),[...p.children].forEach((e=>e.remove())),o.messages.forEach((t=>{const s=new n(t,e).render();t.content&&p.appendChild(s),s.scrollIntoView({behavior:"smooth",block:"start"})}));else if(o.lazyload)console.log(o.messages),o.messages.forEach((t=>{const s=new n(t,e).render();p.firstChild&&t.content&&p.insertBefore(s,p.firstChild)}));else if(o.allLoaded)s=o.allLoaded;else if(o.showFavorite){if(!o.messages.length)return f=!1,void k.classList.remove("showed");f=!0,k.classList.add("showed"),[...p.children].forEach((e=>e.remove())),o.messages.forEach((t=>{const s=new n(t,e).render();s.querySelector(".message-controllers").classList.add("null"),t.content&&p.appendChild(s),s.scrollIntoView({behavior:"smooth",block:"start"})}))}else if(o.showAll)[...p.children].forEach((e=>e.remove())),o.messages.forEach((t=>{f=!1,k.classList.remove("showed");const s=new n(t,e).render();t.content&&p.appendChild(s),s.scrollIntoView({behavior:"smooth",block:"start"})}));else if(o.pinMessage)document.querySelector(".pinned-message")&&document.querySelector(".pinned-message").remove(),p.insertAdjacentElement("afterbegin",function(e,s){const n=t("div","messanger__pinned pinned-message"),i=t("div","pinned-message__info");n.appendChild(i);const o=t("span","pinned-message__title","Pinned message"),a=t("span","pinned-message__content");e.content.forEach((e=>{"text"===e.type?a.textContent=`${e.body.substr(0,50)}...`:"location"===e.type?a.textContent="Your current location":a.textContent="Message media"})),i.appendChild(o),i.appendChild(a);const d=t("button","pinned-message__close messanger-btn");return n.appendChild(d),n.addEventListener("click",(t=>{t.target!==d&&document.querySelector('.message-messanger[data-id="'+e.id+'"]').scrollIntoView({behavior:"smooth",block:"start"})})),d.addEventListener("click",(()=>{n.remove(),s.send(JSON.stringify({unpinMessage:!0,pinned:!1,id:e.id}))})),n}(o.message,e));else{const t=new n(o,e).render();o.content&&p.appendChild(t),t.scrollIntoView({behavior:"smooth",block:"start"})}},r.addEventListener("submit",(function(t){t.preventDefault(),""!==l.value&&T(e,i("person",[{type:"text",body:l.value}]),g,this,l)})),l.addEventListener("keypress",(function(t){if("Enter"===t.key&&!t.shiftKey){if(t.preventDefault(),""===l.value)return;T(e,i("person",[{type:"text",body:l.value}]),g,this.closest("form"),this)}})),h.addEventListener("change",(e=>{a(e,v),e.currentTarget.value=""})),l.addEventListener("input",(e=>{S(e.target,"50px")})),w.addEventListener("submit",(function(t){t.preventDefault();const s={search:!0,value:C.value.toLowerCase()};e.send(JSON.stringify(s))})),C.addEventListener("input",(function(){""===this.value&&e.send(JSON.stringify({init:!0}))})),m.addEventListener("click",(()=>{h.click()})),k.addEventListener("click",(()=>{f?e.send(JSON.stringify({showAll:!0})):e.send(JSON.stringify({showFavorite:!0}))})),B.addEventListener("click",(()=>{var t;t=e,navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(e){t.send(i("person",[{type:"location",body:`${e.coords.latitude}, ${e.coords.longitude}`}]))}))})),p.addEventListener("scroll",(()=>{p.scrollTop||s||e.send(JSON.stringify({init:!0}))})),d(c,v),document.addEventListener("dragover",(e=>e.preventDefault())),document.addEventListener("drop",(e=>e.preventDefault()))}}})();
//# sourceMappingURL=main.js.map